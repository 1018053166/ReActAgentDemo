package com.example.reactmcp.tools;

import com.example.reactmcp.model.ReActStepEvent;
import com.example.reactmcp.service.ReActEventPublisher;
import dev.langchain4j.agent.tool.Tool;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Component;

/**
 * åŸºç¡€æ•°å­¦å·¥å…·é›†
 * æä¾›åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•ç­‰ç®€å•è®¡ç®—èƒ½åŠ›
 */
@Component
public class McpTools {
    
    private static final Logger log = LoggerFactory.getLogger(McpTools.class);
    private final ReActEventPublisher eventPublisher;
    
    public McpTools(ReActEventPublisher eventPublisher) {
        this.eventPublisher = eventPublisher;
    }

    @Tool("æ‰§è¡Œä¸¤ä¸ªæ•°çš„åŠ æ³•è¿ç®—")
    public String add(int a, int b) {
        log.info("");
        log.info("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
        log.info("â”‚ ğŸ”§ å·¥å…·è°ƒç”¨: add                                      â”‚");
        log.info("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        log.info("â”‚ ğŸ“¥ è¾“å…¥å‚æ•°:");
        log.info("â”‚    â€¢ a: {}", a);
        log.info("â”‚    â€¢ b: {}", b);
        
        int result = a + b;
        String resultStr = String.valueOf(result);
        
        log.info("â”‚ ğŸ“¤ è¿”å›ç»“æœ:");
        log.info("â”‚    {}", resultStr);
        log.info("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
        log.info("");
        
        return resultStr;
    }

    @Tool("æ‰§è¡Œä¸¤ä¸ªæ•°çš„å‡æ³•è¿ç®—")
    public String subtract(int a, int b) {
        log.info("");
        log.info("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
        log.info("â”‚ ğŸ”§ å·¥å…·è°ƒç”¨: subtract                                 â”‚");
        log.info("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        log.info("â”‚ ğŸ“¥ è¾“å…¥å‚æ•°:");
        log.info("â”‚    â€¢ a: {}", a);
        log.info("â”‚    â€¢ b: {}", b);
        
        int result = a - b;
        String resultStr = String.valueOf(result);
        
        log.info("â”‚ ğŸ“¤ è¿”å›ç»“æœ:");
        log.info("â”‚    {}", resultStr);
        log.info("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
        log.info("");
        
        return resultStr;
    }

    @Tool("æ‰§è¡Œä¸¤ä¸ªæ•°çš„ä¹˜æ³•è¿ç®—")
    public String multiply(int a, int b) {
        log.info("");
        log.info("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
        log.info("â”‚ ğŸ”§ å·¥å…·è°ƒç”¨: multiply                                 â”‚");
        log.info("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        log.info("â”‚ ğŸ“¥ è¾“å…¥å‚æ•°:");
        log.info("â”‚    â€¢ a: {}", a);
        log.info("â”‚    â€¢ b: {}", b);
        
        int result = a * b;
        String resultStr = String.valueOf(result);
        
        log.info("â”‚ ğŸ“¤ è¿”å›ç»“æœ:");
        log.info("â”‚    {}", resultStr);
        log.info("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
        log.info("");
        
        return resultStr;
    }

    @Tool("æ‰§è¡Œä¸¤ä¸ªæ•°çš„é™¤æ³•è¿ç®—(b ä¸å¯ä¸º 0)")
    public String divide(int a, int b) {
        log.info("");
        log.info("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”");
        log.info("â”‚ ğŸ”§ å·¥å…·è°ƒç”¨: divide                                   â”‚");
        log.info("â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤");
        log.info("â”‚ ğŸ“¥ è¾“å…¥å‚æ•°:");
        log.info("â”‚    â€¢ a: {}", a);
        log.info("â”‚    â€¢ b: {}", b);
        
        if (b == 0) {
            String error = "Division by zero is not allowed";
            log.info("â”‚ ğŸ“¤ è¿”å›ç»“æœ:");
            log.info("â”‚    {}", error);
            log.info("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
            log.info("");
            
            return error;
        }
        
        int result = a / b;
        String resultStr = String.valueOf(result);
        
        log.info("â”‚ ğŸ“¤ è¿”å›ç»“æœ:");
        log.info("â”‚    {}", resultStr);
        log.info("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜");
        log.info("");
        
        return resultStr;
    }
}
