# 🚀 Playwright MCP 快速验证指南

## 📋 前置条件检查

### 1. 确认应用已启动
```bash
# 在终端运行
mvn spring-boot:run

# 等待看到以下日志表示启动成功：
# Started ReactMcpApplication in X.XXX seconds
# Tomcat started on port 8080
```

### 2. 浏览器自动下载
首次启动时，Playwright 会自动下载 Chromium 浏览器（约 127MB），请耐心等待。

## 🎯 验证步骤

### 方式一：使用 Web 界面（推荐）

#### 1. 打开浏览器访问
```
http://localhost:8080
```

#### 2. 你会看到一个美观的 Web 界面
- 🎭 **Playwright 浏览器自动化示例**（5个示例）
- 🧮 **数学计算示例**（4个示例）
- 📁 **文件操作示例**（3个示例）

#### 3. 测试 Playwright 功能

##### 测试 1：打开网页 🌐
点击 "打开网页" 示例按钮，或手动输入：
```
访问 https://example.com 并获取页面标题
```

**预期结果：**
- 看到 AI 思考过程
- 调用 `navigate` 工具打开网页
- 返回页面标题："Example Domain"

##### 测试 2：自动搜索 🔍
点击 "自动搜索" 示例按钮，或手动输入：
```
打开百度首页，搜索 Spring Boot 教程
```

**预期结果：**
- AI 自动分解任务
- 依次调用 `navigate`、`fill`、`click` 工具
- 完成搜索操作

##### 测试 3：网页截图 📸
点击 "网页截图" 示例按钮，或手动输入：
```
访问 https://www.baidu.com 并截图保存到 /tmp/baidu.png
```

**预期结果：**
- 打开百度首页
- 调用 `screenshot` 工具
- 截图保存到 `/tmp/baidu.png`
- 可以在文件系统中查看截图

##### 测试 4：执行 JavaScript ⚙️
点击 "执行 JS" 示例按钮，或手动输入：
```
打开 example.com 并使用 JavaScript 获取页面 URL
```

**预期结果：**
- 打开网页
- 调用 `evaluate` 工具执行 JS
- 返回页面 URL

##### 测试 5：提取内容 📄
点击 "提取内容" 示例按钮，或手动输入：
```
打开 https://example.com 获取所有段落文本
```

**预期结果：**
- 打开网页
- 调用 `getText` 工具
- 提取段落内容

#### 4. 观察执行过程

界面会实时显示：
- 💭 **AI 思考**：AI 的推理过程
- 🔧 **调用工具**：具体调用了哪个工具及参数
- ✅ **最终答案**：任务执行结果

---

### 方式二：使用命令行测试

#### 1. 测试打开网页
```bash
curl "http://localhost:8080/react/solve?task=访问 https://example.com 并获取页面标题"
```

#### 2. 测试自动搜索
```bash
curl "http://localhost:8080/react/solve?task=打开百度搜索 Java 教程"
```

#### 3. 测试截图功能
```bash
curl "http://localhost:8080/react/solve?task=访问百度首页并截图保存到 /tmp/test.png"

# 验证截图是否生成
ls -lh /tmp/test.png
```

#### 4. 测试 JavaScript 执行
```bash
curl "http://localhost:8080/react/solve?task=打开 example.com 并执行 JavaScript 获取页面标题"
```

---

### 方式三：使用测试脚本

```bash
# 运行交互式测试脚本
./test-playwright-mcp.sh

# 选择选项 1-5 进行测试
```

## 🎨 界面功能说明

### 示例标签
- 点击任意示例标签，会自动填充到输入框
- 鼠标悬停时高亮显示

### 输入框
- 支持回车键快速执行
- 支持自然语言描述任务

### 执行过程可视化
- **💭 AI 思考**：蓝色边框，显示推理过程
- **🔧 调用工具**：黄色边框，显示工具调用
- **✅ 最终答案**：紫色边框，显示执行结果

### 按钮功能
- **开始执行**：执行当前任务
- **清空**：清空输出区域

## 🔍 验证清单

### ✅ Playwright 工具验证

| 工具 | 测试任务 | 验证点 |
|------|---------|--------|
| **navigate** | 打开 example.com | 浏览器打开，返回标题 |
| **click** | 百度搜索按钮点击 | 成功触发搜索 |
| **fill** | 搜索框输入文本 | 内容正确填入 |
| **getText** | 获取段落文本 | 文本内容提取 |
| **screenshot** | 保存截图 | 文件成功生成 |
| **waitTime** | 等待页面加载 | 延迟执行 |
| **getPageInfo** | 获取页面信息 | URL 和标题返回 |
| **evaluate** | 执行 JS 代码 | 返回执行结果 |
| **closeBrowser** | 关闭浏览器 | 资源释放 |

### ✅ 数学工具验证

| 工具 | 测试任务 | 预期结果 |
|------|---------|---------|
| **add** | 123 + 456 | 579 |
| **subtract** | 100 - 37 | 63 |
| **multiply** | 15 × 8 | 120 |
| **divide** | 144 ÷ 12 | 12 |

### ✅ 文件工具验证

| 工具 | 测试任务 | 验证点 |
|------|---------|--------|
| **listFiles** | 列出 /tmp 目录 | 显示文件列表 |
| **writeFile** | 创建测试文件 | 文件成功创建 |
| **readFile** | 读取文件内容 | 内容正确返回 |

## 🐛 常见问题

### Q1: 浏览器下载很慢怎么办？
**A:** 首次启动需要下载 Chromium（约 127MB），请耐心等待。如果失败，会自动切换镜像重试。

### Q2: 页面无法打开怎么办？
**A:** 
1. 确认应用已启动（端口 8080）
2. 检查 URL 是否正确：`http://localhost:8080`
3. 查看应用日志是否有错误

### Q3: 工具调用失败怎么办？
**A:**
1. 查看应用日志，定位具体错误
2. 确认 Playwright 浏览器已正确安装
3. 检查网络连接是否正常

### Q4: 截图保存在哪里？
**A:** 
- 默认保存在指定的路径（如 `/tmp/baidu.png`）
- 可以在任务中自定义保存路径

### Q5: 如何查看详细的 ReAct 推理过程？
**A:**
- Web 界面会实时显示每一步
- 后台日志也会记录详细信息
- 启用 DEBUG 级别日志查看更多细节

## 📊 性能参考

| 操作 | 预期耗时 |
|------|---------|
| 打开网页 | 2-5秒 |
| 点击元素 | <1秒 |
| 截图 | 1-2秒 |
| JavaScript 执行 | <1秒 |
| 完整搜索流程 | 5-10秒 |

## 🎯 高级测试

### 复杂任务测试
```
打开百度，搜索 Playwright 自动化，点击第一个结果，获取新页面标题
```

### 条件判断测试
```
访问 github.com，检查是否有登录按钮，如果有则返回按钮文本
```

### 数据提取测试
```
打开新闻网站首页，提取所有新闻标题
```

## 📝 注意事项

1. **首次使用**：需要等待 Chromium 下载完成
2. **有头模式**：可以看到浏览器窗口打开（便于调试）
3. **无头模式**：后台运行（性能更好）
4. **资源管理**：应用关闭时会自动清理浏览器资源
5. **并发限制**：建议避免同时执行多个浏览器任务

## 🎓 学习资源

- **ReAct 框架**：观察 AI 如何分解任务
- **Playwright API**：了解各个工具的用法
- **自然语言控制**：尝试用不同的表述方式

## ✅ 验证完成后

如果所有测试通过，说明 Playwright MCP 集成成功！你可以：

1. 🚀 开始实际的自动化任务
2. 📚 查看 `PLAYWRIGHT_MCP_GUIDE.md` 了解更多高级用法
3. 🛠️ 根据需求扩展更多工具
4. 🎨 自定义前端界面

---

**祝你使用愉快！** 🎉

如有问题，请查看项目文档或查看应用日志。
